"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[8313],{65722:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var i=n(74848),r=n(28453);const a={id:"trace-polling",title:"Trace Polling Settings",description:"Tracetest polls the trace data store to find and retrieve the trace that is generated by the current test run.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},s=void 0,o={id:"configuration/trace-polling",title:"Trace Polling Settings",description:"Tracetest polls the trace data store to find and retrieve the trace that is generated by the current test run.",source:"@site/docs/configuration/trace-polling.mdx",sourceDirName:"configuration",slug:"/configuration/trace-polling",permalink:"/configuration/trace-polling",draft:!1,unlisted:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/configuration/trace-polling.mdx",tags:[],version:"current",frontMatter:{id:"trace-polling",title:"Trace Polling Settings",description:"Tracetest polls the trace data store to find and retrieve the trace that is generated by the current test run.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},sidebar:"tutorialSidebar",previous:{title:"Trace Analyzer Settings",permalink:"/configuration/tracetest-analyzer"},next:{title:"Test Runner Settings",permalink:"/configuration/test-runner"}},c={},l=[{value:"Periodic Polling Strategy",id:"periodic-polling-strategy",level:2},{value:"Changing Trace Polling Settings from the UI",id:"changing-trace-polling-settings-from-the-ui",level:2},{value:"Changing Trace Polling Settings with the CLI",id:"changing-trace-polling-settings-with-the-cli",level:2}];function g(e){const t={a:"a",code:"code",h2:"h2",img:"img",mermaid:"mermaid",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Tracetest currently has one algorithm for gathering the trace associated with a test which is based on periodic polling. We will be adding the ability to add multiple polling settings in the coming releases, as well as adding new polling strategies. Let us know as you have specific needs by ",(0,i.jsx)(t.a,{href:"https://github.com/kubeshop/tracetest/issues/new/choose",children:"adding an issue"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"periodic-polling-strategy",children:"Periodic Polling Strategy"}),"\n",(0,i.jsx)(t.p,{children:"Tracetest polls the trace data store to find and retrieve the trace that is generated by the current test run. Both the total length of time to wait to receive the trace, i.e. the 'Max wait time for trace', and the time to delay between each polling attempt, i.e. 'Retry delay', can be adjusted. The following diagram shows how the polling for the trace works:"}),"\n",(0,i.jsx)(t.mermaid,{value:"flowchart TD\n    A[Run] --\x3e B[Created]\n    B --\x3e C[Resolve Trigger Vars]\n    C --\x3e D[Execute Trigger]\n    D --\x3e ET{Is Successful Trigger}\n    ET --\x3e|Yes| E[Queue Polling]\n    ET --\x3e|NO| ES[Set State to Failed]\n    ES --\x3e Q\n    E --\x3e F[Execute Polling Job]\n    F --\x3e G[Fetch Trace from Data Store<br>after the retry delay]\n    G --\x3e H{Trace Exists}\n    H --\x3e|No| I{Max wait time<br>for trace reached}\n    H --\x3e|Yes| J{Has the span # changed}\n    J --\x3e|Yes| G\n    J --\x3e|No| K[Trace is ready]\n    I --\x3e|No| G\n    I --\x3e|Yes| L[Trace fetch failed]\n    K --\x3e O[Generating Outputs]\n    O --\x3e P[Running Test Specs]\n    P --\x3e Q[Finish]\n    L --\x3e ES"}),"\n",(0,i.jsx)(t.h2,{id:"changing-trace-polling-settings-from-the-ui",children:"Changing Trace Polling Settings from the UI"}),"\n",(0,i.jsx)(t.p,{children:"In the Tracetest Web UI, open (1) Settings and select (2) the Trace Polling tab:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Trace Polling Settings",src:n(24372).A+"",width:"2846",height:"1588"})}),"\n",(0,i.jsx)(t.p,{children:"From this trace polling page, under settings, you can adjust the speed with which the trace data store is polled when gathering the trace associated with a test run."}),"\n",(0,i.jsx)(t.h2,{id:"changing-trace-polling-settings-with-the-cli",children:"Changing Trace Polling Settings with the CLI"}),"\n",(0,i.jsx)(t.p,{children:"Or, if you prefer using the CLI, you can use this resource definition file to set the polling parameters for the Tracetest server:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"type: PollingProfile\nspec:\n  default: true\n  periodic:\n    retryDelay: 500ms\n    timeout: 50s\n  strategy: periodic\n"})}),"\n",(0,i.jsx)(t.p,{children:"Proceed to run this command in the terminal and specify the file above."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"tracetest apply pollingprofile -f my/resource/pollingprofile-resource.yaml\n"})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}},24372:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/trace-polling-settings-0.11.3-3a1c291ba54b81a434f7d77c1f90a1ea.png"},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var i=n(96540);const r={},a=i.createContext(r);function s(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);