"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[2013],{61978:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var s=n(74848),a=n(28453);const r={id:"kubernetes",title:"Install with Kubernetes",description:"Installation and deployment instructions for using Kubernetes deploy a Tracetest Agent and use the Cloud-based managed Tracetest Control Plane / Dashboard.",hide_table_of_contents:!0,keywords:["tracetest","tracetest cli install","tracetest cloud install","tracetest agent install","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},i=void 0,l={id:"install/kubernetes",title:"Install with Kubernetes",description:"Installation and deployment instructions for using Kubernetes deploy a Tracetest Agent and use the Cloud-based managed Tracetest Control Plane / Dashboard.",source:"@site/docs/install/kubernetes.mdx",sourceDirName:"install",slug:"/install/kubernetes",permalink:"/install/kubernetes",draft:!1,unlisted:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/install/kubernetes.mdx",tags:[],version:"current",frontMatter:{id:"kubernetes",title:"Install with Kubernetes",description:"Installation and deployment instructions for using Kubernetes deploy a Tracetest Agent and use the Cloud-based managed Tracetest Control Plane / Dashboard.",hide_table_of_contents:!0,keywords:["tracetest","tracetest cli install","tracetest cloud install","tracetest agent install","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},sidebar:"tutorialSidebar",previous:{title:"Install with Docker",permalink:"/install/docker"},next:{title:"Install with Helm",permalink:"/install/cloud-helm"}},c={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install the Tracetest Agent with Kubernetes",id:"install-the-tracetest-agent-with-kubernetes",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"This guide explains how to install a Tracetest Agent in your Kubernetes environment. This deployment uses the Cloud-based managed Tracetest Control Plane and Dashboard."}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"A running Kubernetes cluster."}),"\n",(0,s.jsxs)(t.li,{children:["Install ",(0,s.jsx)(t.a,{href:"https://kubernetes.io/docs/tasks/tools/#kubectl",children:(0,s.jsx)(t.code,{children:"kubectl"})}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"https://app.tracetest.io/",children:"Sign in to Tracetest"})," and retrieve your ",(0,s.jsx)(t.a,{href:"https://app.tracetest.io/retrieve-token",children:"Tracetest Organization API Key/Token and Environment ID"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"install-the-tracetest-agent-with-kubernetes",children:"Install the Tracetest Agent with Kubernetes"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"/concepts/agent",children:"Tracetest Agent"})," runs as a Kubernetes Deployment with a Service."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",metastring:'title="tracetest-agent.yaml"',children:'---\n# Service\napiVersion: v1\nkind: Service\nmetadata:\n  name: tracetest-agent\n  labels:\n    app.kubernetes.io/name: tracetest-agent\n    app.kubernetes.io/instance: tracetest-agent\nspec:\n  selector:\n    app.kubernetes.io/name: tracetest-agent\n    app.kubernetes.io/instance: tracetest-agent\n  ports:\n    - name: grpc-collector-entrypoint\n      protocol: TCP\n      port: 4317\n      targetPort: 4317\n    - name: http-collector-entrypoint\n      protocol: TCP\n      port: 4318\n      targetPort: 4318\n---\n# Deployment\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: tracetest-agent\n  labels:\n    app: tracetest-agent\n    app.kubernetes.io/name: tracetest-agent\n    app.kubernetes.io/instance: tracetest-agent\nspec:\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: tracetest-agent\n      app.kubernetes.io/instance: tracetest-agent\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: tracetest-agent\n        app.kubernetes.io/instance: tracetest-agent\n    spec:\n      containers:\n        - name: agent\n          image: "kubeshop/tracetest-agent:latest"\n          imagePullPolicy: Always\n          args: [\n            "--environment",\n            "<TRACETEST_ENVIRONMENT_ID>", # Add your env id\n            "--api-key",\n            "$TRACETEST_API_KEY",\n            "--server-url",\n            "https://app.tracetest.io",\n          ]\n          env:\n          - name: TRACETEST_API_KEY\n            value: "<TRACETEST_API_KEY>" # Add your API key\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",metastring:'title="Terminal"',children:"kubectl apply -f ./tracetest-agent.yaml\n"})}),"\n",(0,s.jsx)(t.p,{children:"The Tracetest Agent is running in Kubernetes and ready to accept traces."}),"\n",(0,s.jsxs)(t.p,{children:["gRPC: ",(0,s.jsx)(t.code,{children:"http://tracetest-agent.default.svc.cluster.local:4317"})]}),"\n",(0,s.jsxs)(t.p,{children:["HTTP: ",(0,s.jsx)(t.code,{children:"http://tracetest-agent.default.svc.cluster.local:4318/v1/traces"})]}),"\n",(0,s.jsxs)(t.admonition,{title:"K8s Network",type:"note",children:[(0,s.jsxs)(t.p,{children:["Make sure to check use the correct ",(0,s.jsx)(t.code,{children:"<service-name>"})," if you edit the Tracetest Agent ",(0,s.jsx)(t.code,{children:"service"})," name."]}),(0,s.jsxs)(t.p,{children:["Running a test against ",(0,s.jsx)(t.code,{children:"localhost"})," will resolve as ",(0,s.jsx)(t.code,{children:"127.0.0.1"})," inside the Tracetest Agent container.\nMake sure to run tests using the internal Kubernetes service networking eg: ",(0,s.jsx)(t.code,{children:"http://api.default.svc.cluster.local:port"}),"."]})]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var s=n(96540);const a={},r=s.createContext(a);function i(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);