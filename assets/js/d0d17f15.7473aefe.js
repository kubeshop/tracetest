"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[9779],{60198:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=n(74848),s=n(28453);const r={id:"polling-profiles",title:"Polling Profiles",description:"Polling profiles define how Tracetest will interact with a Tracing Backend to retrieve traces from tests",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},l=void 0,o={id:"concepts/polling-profiles",title:"Polling Profiles",description:"Polling profiles define how Tracetest will interact with a Tracing Backend to retrieve traces from tests",source:"@site/docs/concepts/polling-profiles.mdx",sourceDirName:"concepts",slug:"/concepts/polling-profiles",permalink:"/concepts/polling-profiles",draft:!1,unlisted:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/concepts/polling-profiles.mdx",tags:[],version:"current",frontMatter:{id:"polling-profiles",title:"Polling Profiles",description:"Polling profiles define how Tracetest will interact with a Tracing Backend to retrieve traces from tests",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},sidebar:"tutorialSidebar",previous:{title:"Traces",permalink:"/concepts/traces"},next:{title:"Architecture",permalink:"/concepts/architecture"}},a={},c=[{value:"Adding a Polling Profile in the CLI",id:"adding-a-polling-profile-in-the-cli",level:2},{value:"Working with Polling Profiles in the UX",id:"working-with-polling-profiles-in-the-ux",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"When running trace-based testing, it is crucial to have the trace generated by the test execution. Usually, these traces are stored\nin a tracing backend (Jaeger, Tempo, etc) or they can be sent directly to Tracetest via OpenTelemetry Collector. In both cases, the trace is not\ncomplete as soon as the test is run, the application might run a long-running operation or is batching generated spans before sending them\nto the tracing backend. In any case, spans are not sent instantaneously and are not available for Tracetest as soon as the test trigger is\ndone running."}),"\n",(0,i.jsxs)(t.p,{children:["This means that Tracetest needs to check periodically if the trace is complete or not. For this, a ",(0,i.jsx)(t.strong,{children:"Polling Profile"})," is used. This profile\ntells Tracetest how often and how long to wait for a trace to finish. Every Tracetest environment has one default polling profile, meaning that any\ntest will use that profile when trying to fetch the trace from the tracing backend."]}),"\n",(0,i.jsx)(t.p,{children:"Since version v1.0.0, users can now specify a different\npolling profile per test. This makes more sense than having a single profile, due to some tests being pretty quick to run and others can take minutes\nto hours to finish executing."}),"\n",(0,i.jsx)(t.admonition,{title:"Commercial Feature",type:"tip",children:(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://tracetest.io/pricing",children:"Using multiple polling profiles is available only in Cloud-based Managed Tracetest & Enterprise Self-hosted Tracetest."})})}),"\n",(0,i.jsx)(t.h2,{id:"adding-a-polling-profile-in-the-cli",children:"Adding a Polling Profile in the CLI"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"# test.yaml\ntype: Test\nspec:\n    name: my quick test\n    pollingProfile: ./quick-polling-profile.yaml\n    trigger:\n        type: http\n        httpRequest:\n            url: http://${env:ENDPOINT}/api/resource\n            method: GET\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"# quick-polling-profile.yaml\ntype: PollingProfile\nspec:\n    name: quick polling profile\n    strategy: periodic\n    periodic:\n        retryDelay: 5s\n        timeout: 60s\n"})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"retryDelay"}),": How long Tracetest must wait between trace polling tries. In this example, Tracetest will try to get the trace every 5 seconds."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"timeout"}),": How long Tracetest must keep trying getting a trace. If it takes more than the value set in timeout, the test fails."]}),"\n",(0,i.jsx)(t.h2,{id:"working-with-polling-profiles-in-the-ux",children:"Working with Polling Profiles in the UX"}),"\n",(0,i.jsxs)(t.p,{children:["In the Tracetest UX, select ",(0,i.jsx)(t.strong,{children:"Settings"})," and then select ",(0,i.jsx)(t.strong,{children:"Trace Polling"}),":"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Trace Polling UX",src:n(39935).A+"",width:"1388",height:"778"})}),"\n",(0,i.jsxs)(t.p,{children:["Here you will create polling profiles for your environment and see all of the polling profiles already created. Click the ",(0,i.jsx)(t.strong,{children:"Edit"})," button for a profile to make changes."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Trace Polling UX2",src:n(64498).A+"",width:"1388",height:"778"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"Edit Polling Profiles"})," pop up appears where changes can be made to the profile:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Edit Polling Profile",src:n(45412).A+"",width:"1372",height:"740"})}),"\n",(0,i.jsxs)(t.p,{children:["To create a Polling Profile, click on the ",(0,i.jsx)(t.strong,{children:"Add Polling Profile"})," button:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Add Polling Profile",src:n(2771).A+"",width:"2874",height:"1568"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"Create Polling Profile"})," pop up appears:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Add Polling Profile Pop Up",src:n(4123).A+"",width:"2874",height:"1570"})}),"\n",(0,i.jsx)(t.p,{children:"Input a polling profile name, use the toggle to indicate whether this profile will be a Default profile (a default for all test runs), and pick a polling strategy."}),"\n",(0,i.jsx)(t.p,{children:"The options for Polling Profile Strategy are:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Periodic:"})," Tracetest periodically queries the tracing backend at predefined intervals to fetch trace data."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"No-polling:"})," Tracetest does not query the tracing backend for trace data. It skips the fetching trace step."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["A Polling Profile can also be selected from a test. After selecting a test, on the ",(0,i.jsx)(t.strong,{children:"Trigger"})," tab, select the ",(0,i.jsx)(t.strong,{children:"Settings"})," tab and select an existing polling profile from the drop down."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Select Polling Profile from Test",src:n(48529).A+"",width:"1380",height:"776"})})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},4123:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/add-polling-profile-pop-up-353d3877aa40d8e344e6d496bd28baad.png"},2771:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/add-polling-profile-bd42e3141dfe6f47522545758576531d.png"},45412:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/edit-polling-profile-4ab85bdc80175a0af4a952f56a573897.png"},48529:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/select-polling-profile-from-test-be5f97d90d99fb5246522e3873ea6b3c.png"},64498:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/trace-polling-ux-2-a2238dc9cf157450d2814fd02283ee20.png"},39935:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/trace-polling-ux-a7c483625f7b0f7e63fdf6db666835ae.png"},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var i=n(96540);const s={},r=i.createContext(s);function l(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);