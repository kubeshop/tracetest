"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[175],{39898:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var r=n(74848),s=n(28453);const a={id:"gcp",title:"Install in GCP",description:"Get started by installing Tracetest in your GCP cluster with GKE.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},l=void 0,o={id:"install/gcp",title:"Install in GCP",description:"Get started by installing Tracetest in your GCP cluster with GKE.",source:"@site/docs/install/gcp.mdx",sourceDirName:"install",slug:"/install/gcp",permalink:"/install/gcp",draft:!1,unlisted:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/install/gcp.mdx",tags:[],version:"current",frontMatter:{id:"gcp",title:"Install in GCP",description:"Get started by installing Tracetest in your GCP cluster with GKE.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},sidebar:"tutorialSidebar",previous:{title:"Install with Helm",permalink:"/install/on-prem-helm"},next:{title:"Deployment Architecture",permalink:"/install/deployment-architecture"}},i={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install Tracetest On-Premises in GCP (GKE) with Helm",id:"install-tracetest-on-premises-in-gcp-gke-with-helm",level:2},{value:"Cert Manager",id:"cert-manager",level:3},{value:"Traefik",id:"traefik",level:3},{value:"DNS",id:"dns",level:3},{value:"Helm Install",id:"helm-install",level:3}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Installation and deployment instructions for using Helm to deploy Enterprise self-hosted Tracetest in GCP (GKE) and use the On-Prem Tracetest Control Plane/Dashboard."}),"\n",(0,r.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["A Kubernetes cluster running on GKE (",(0,r.jsx)(t.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/creating-an-autopilot-cluster",children:"installation instructions"}),")."]}),"\n",(0,r.jsxs)(t.li,{children:["Traefik installed in your cluster (",(0,r.jsx)(t.a,{href:"https://doc.traefik.io/traefik/getting-started/install-traefik/",children:"installation instructions"}),")."]}),"\n",(0,r.jsxs)(t.li,{children:["A Cert Manager installed in your cluster (",(0,r.jsx)(t.a,{href:"https://cert-manager.io/docs/installation/kubernetes/",children:"installation instructions"}),")."]}),"\n",(0,r.jsxs)(t.li,{children:["A Tracetest license key. If you don't have one, you can request a trial license key ",(0,r.jsx)(t.a,{href:"https://tracetest.io/on-prem-installation",children:"here"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Install ",(0,r.jsx)(t.a,{href:"https://kubernetes.io/docs/tasks/tools/#kubectl",children:(0,r.jsx)(t.code,{children:"kubectl"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Install ",(0,r.jsx)(t.a,{href:"https://helm.sh/",children:"Helm"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"install-tracetest-on-premises-in-gcp-gke-with-helm",children:"Install Tracetest On-Premises in GCP (GKE) with Helm"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsxs)(t.a,{href:"https://github.com/kubeshop/tracetest-cloud-charts/blob/main/README.md",children:["main chart for this repository is called ",(0,r.jsx)(t.code,{children:"tracetest-onprem"})]})," and contains all components necessary to run Enterprise self-hosted Tracetest on-premises in a cluster that fits the ",(0,r.jsx)(t.a,{href:"/install/deployment-architecture",children:"deployment architecture"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"cert-manager",children:"Cert Manager"}),"\n",(0,r.jsxs)(t.p,{children:["Make sure that you have a ",(0,r.jsx)(t.a,{href:"https://cert-manager.io",children:"Cert Manager"})," installed in your cluster with a valid issuer. If you don't have one, you can follow the ",(0,r.jsx)(t.a,{href:"https://cert-manager.io/docs/installation/",children:"cert-manager installation guide"})," or use the following command to install it:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",metastring:'title="Terminal"',children:"# create namespace for cert-manager in your cluster\nkubectl create namespace cert-manager\n\n# add the jetstack repository to helm\nhelm repo add jetstack https://charts.jetstack.io --force-update\n\n# install cert-manager, setting the CRDs and leader election namespace (needed for GKE)\nhelm install cert-manager jetstack/cert-manager      \\\n  --namespace cert-manager                           \\\n  --version v1.15.0                                  \\\n  --set crds.enabled=true                            \\\n  --set global.leaderElection.namespace=cert-manager\n"})}),"\n",(0,r.jsx)(t.h3,{id:"traefik",children:"Traefik"}),"\n",(0,r.jsxs)(t.p,{children:["Also, you will need to have a Traefik proxy, that will handle all connections to the Tracetest services. You can install Traefik by creating a ",(0,r.jsx)(t.code,{children:"values-traefik.yaml"})," file with the following content:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'title="values-traefik.yaml"',children:'dnsNames:\n  - "tracetest.localdev" # add here your DNS domain to access Tracetest\n\ntls:\n  issuerRef:\n    ... # add here your issuer reference\n\nproviders:\n  kubernetesCRD:\n    enabled: true\n\nservice:\n  type: NodePort\n\nports:\n  websecure:\n    port: 30000\n    exposedPort: 30000\n    nodePort: 30000\n    protocol: TCP\n    tls:\n      enabled: true\n    http2:\n      maxConcurrentStreams: 250\n'})}),"\n",(0,r.jsx)(t.p,{children:"And then run the following commands:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sh",metastring:'title="Terminal"',children:"# create namespace for traefik in your cluster\nkubectl create namespace traefik\n\n# add traefik charts in your machine\nhelm repo add traefik https://helm.traefik.io/traefik --force-update\n\n# install traefik in your cluster\nhelm install traefik traefik/traefik \\\n  --namespace traefik \\\n  --values values-traefik.yaml\n"})}),"\n",(0,r.jsx)(t.h3,{id:"dns",children:"DNS"}),"\n",(0,r.jsxs)(t.p,{children:["After that, you will create a ",(0,r.jsx)(t.code,{children:"values.yaml"})," file that defines what is the DNS domain that you will use to access the Tracetest services and the connection details for Postgres and MongoDB.\nYou can see more details about the ",(0,r.jsx)(t.code,{children:"values.yaml"})," file ",(0,r.jsx)(t.a,{href:"https://github.com/kubeshop/tracetest-cloud-charts/blob/main/charts/tracetest-onprem/values.yaml",children:"here"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["You can use the following template to create your ",(0,r.jsx)(t.code,{children:"values.yaml"})," file, where we are using the domain ",(0,r.jsx)(t.code,{children:"tracetest.localdev"})," as the DNS, ",(0,r.jsx)(t.code,{children:"tracetest-postgres-postgresql.external"})," as the Postgres and ",(0,r.jsx)(t.code,{children:"tracetest-dependencies-mongodb.external"})," MongoDB server:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'title="values.yaml"',children:'global:\n  urls:\n    protocol: &protocol "https"\n    port: &port "30000"\n    rootDomain: &rootDomain "tracetest.localdev"\n    cookieDomain: *rootDomain\n\n    web:\n      protocol: *protocol\n      hostname: *rootDomain\n      port: *port\n\n    api:\n      protocol: *protocol\n      hostname: *rootDomain\n      port: *port\n\n    auth:\n      protocol: *protocol\n      hostname: *rootDomain\n      port: *port\n\n    agents:\n      domain: *rootDomain\n      port: *port\n\n    controlPlane:\n      protocol: *protocol\n      hostname: *rootDomain\n      port: *port\n\n  postgresql:\n    auth:\n      host: "tracetest-postgres-postgresql.external"\n      username: "tracetest"\n      password: "tracetest"\n      database: "tracetest"\n\n  mongodb:\n    auth:\n      protocol: "mongodb"\n      host: "tracetest-dependencies-mongodb.external"\n      username: "tracetest"\n      password: "tracetest"\n      database: "tracetest"\n      options:\n        retryWrites: "true"\n        authSource: admin\n'})}),"\n",(0,r.jsx)(t.h3,{id:"helm-install",children:"Helm Install"}),"\n",(0,r.jsxs)(t.p,{children:["And finally, run the ",(0,r.jsx)(t.code,{children:"helm install"})," command with your license key and the ",(0,r.jsx)(t.code,{children:"values.yaml"})," file:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sh",children:"# create namespace for tracetest cloud in your cluster\nkubectl create namespace tracetestcloud\n\n# add tracetest cloud charts in your machine\nhelm repo add tracetestcloud https://kubeshop.github.io/tracetest-cloud-charts --force-update\n\n# and then install tracetest cloud in your cluster\nhelm install my-tracetest-cloud tracetestcloud/tracetest-onprem   \\\n    --namespace tracetestcloud                                    \\\n    --set global.licenseKey=<YOUR_LICENSE_KEY> \\\n    --values values.yaml\n"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var r=n(96540);const s={},a=r.createContext(s);function l(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);