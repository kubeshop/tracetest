"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[3142],{84055:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=n(74848),a=n(28453);const r={id:"migrating-tests-from-playwright-integration-to-playwright-engine",title:"Migrating Tests from Playwright Integration to Playwright Engine",description:"Quickstart on how to Migrating tests from Playwright integration to Playwright Engine",hide_table_of_contents:!1,keywords:["tracetest","trace-based testing","observability","distributed tracing","end-to-end testing","tracetest","playwright","trace-based-testing","trigger"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},s=void 0,o={id:"examples-tutorials/recipes/migrating-tests-from-playwright-integration-to-playwright-engine",title:"Migrating Tests from Playwright Integration to Playwright Engine",description:"Quickstart on how to Migrating tests from Playwright integration to Playwright Engine",source:"@site/docs/examples-tutorials/recipes/migrating-tests-from-playwright-integration-to-playwright-engine.mdx",sourceDirName:"examples-tutorials/recipes",slug:"/examples-tutorials/recipes/migrating-tests-from-playwright-integration-to-playwright-engine",permalink:"/examples-tutorials/recipes/migrating-tests-from-playwright-integration-to-playwright-engine",draft:!1,unlisted:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/examples-tutorials/recipes/migrating-tests-from-playwright-integration-to-playwright-engine.mdx",tags:[],version:"current",frontMatter:{id:"migrating-tests-from-playwright-integration-to-playwright-engine",title:"Migrating Tests from Playwright Integration to Playwright Engine",description:"Quickstart on how to Migrating tests from Playwright integration to Playwright Engine",hide_table_of_contents:!1,keywords:["tracetest","trace-based testing","observability","distributed tracing","end-to-end testing","tracetest","playwright","trace-based-testing","trigger"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},sidebar:"guidesSidebar",previous:{title:"True End-To-End Trace-Based Tests with the Tracetest Playwright Engine Trigger",permalink:"/examples-tutorials/recipes/running-tests-with-tracetest-playwright-engine"},next:{title:"Trace-Based Tests with the Tracetest GraphQL Trigger",permalink:"/examples-tutorials/recipes/running-tests-with-tracetest-graphql-pokeshop"}},l={},c=[{value:"Why is this important?",id:"why-is-this-important",level:2},{value:"Playwright Engine",id:"playwright-engine",level:3},{value:"Playwright Integration",id:"playwright-integration",level:3},{value:"Why Migrate to Playwright Engine?",id:"why-migrate-to-playwright-engine",level:3},{value:"Tracetest Playwright Integration Test",id:"tracetest-playwright-integration-test",level:2},{value:"Tracetest Playwright Engine Test",id:"tracetest-playwright-engine-test",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Learn More",id:"learn-more",level:2}];function g(t){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.admonition,{title:"Tracetest x Playwright Frontend Instrumentation Requirements",type:"info",children:(0,i.jsxs)(e.p,{children:["Find out the requirements for your instrumented app to start using ",(0,i.jsx)(e.a,{href:"https://tracetest.io/blog/tracetest-tip-instrumentation-for-end-to-end-tests",children:"Tracetest x Playwright"}),"."]})}),"\n",(0,i.jsx)(e.admonition,{title:"Version Compatibility",type:"info",children:(0,i.jsxs)(e.p,{children:["The features described here are compatible with the ",(0,i.jsx)(e.a,{href:"https://github.com/kubeshop/tracetest/releases/tag/v1.4.1",children:"Tracetest CLI v1.4.1"})," and above."]})}),"\n",(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"/examples-tutorials/recipes/running-tests-with-tracetest-playwright-engine",children:"Check out the full recipe on using the Playwright Engine here."})})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://tracetest.io/",children:"Tracetest"})," is a testing tool based on ",(0,i.jsx)(e.a,{href:"https://opentelemetry.io/",children:"OpenTelemetry"})," that permits you to test your distributed application. It allows you to use the trace data generated by your OpenTelemetry tools to check and assert if your application has the desired behavior defined by your test definitions."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://playwright.dev/",children:"Playwright"})," is an open-source automation framework developed by Microsoft that enables cross-browser automation for web applications. It provides a set of APIs and libraries for automating interactions with web browsers such as Chrome, Firefox, and Microsoft Edge."]}),"\n",(0,i.jsx)(e.h2,{id:"why-is-this-important",children:"Why is this important?"}),"\n",(0,i.jsx)(e.h3,{id:"playwright-engine",children:"Playwright Engine"}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.a,{href:"/examples-tutorials/recipes/running-tests-with-tracetest-playwright-engine",children:"Tracetest Playwright Engine"})," trigger enables you to combine the power of end-to-end tests with trace-based testing to easily capture a full distributed trace from your OpenTelemetry instrumented front-end and back-end system."]}),"\n",(0,i.jsx)(e.h3,{id:"playwright-integration",children:"Playwright Integration"}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.a,{href:"/tools-and-integrations/playwright",children:"Tracetest integration for Playwright"})," enables your current Playwright tests to easily capture a full distributed trace from your OpenTelemetry instrumented frontend and backend system. You can embed a Tracetest in this Playwright test, and allow trace-based testing assertions to be applied across this entire flow, enabling true end-to-end tests across your entire system."]}),"\n",(0,i.jsx)(e.h3,{id:"why-migrate-to-playwright-engine",children:"Why Migrate to Playwright Engine?"}),"\n",(0,i.jsx)(e.p,{children:"By creating a Tracetest Playwright Engine test, you will be able to create trace-based assertions to be applied across the entire flow like any other Tracetest test. It also allows you to mix and match it with your existing Monitors, Test Suites and CI/CD validations."}),"\n",(0,i.jsx)(e.p,{children:"You do not need to edit your existing Playwright tests. Only import your existing tests into Tracetest."}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1725956860/docs/66b22fa08831a4fafdf23579_66971d81fc6dbc9929228702_Screenshot_25202024-07-16_2520at_25209.24.58_2520PM_td79ry.png",alt:"diffrenrences"})}),"\n",(0,i.jsx)(e.h2,{id:"tracetest-playwright-integration-test",children:"Tracetest Playwright Integration Test"}),"\n",(0,i.jsxs)(e.p,{children:["Running a Tracetest test with the ",(0,i.jsx)(e.a,{href:"/tools-and-integrations/playwright",children:"Playwright integration"})," requires you to do 3 things:"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["Install the ",(0,i.jsx)(e.code,{children:"@tracetest/playwright"})," npm module and edit your existing Playwright test scripts."]}),"\n",(0,i.jsx)(e.li,{children:"Load the Tracetest test definition YAML file."}),"\n",(0,i.jsxs)(e.li,{children:["Add three lifecycle hooks to the Playwright test script: ",(0,i.jsx)(e.code,{children:"beforeAll"}),", ",(0,i.jsx)(e.code,{children:"beforeEach"}),", ",(0,i.jsx)(e.code,{children:"afterAll"}),". They are used to trigger Tracetest."]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:'// 1. Install the Tracetest npm module\nimport { test, expect } from "@playwright/test";\nimport Tracetest, { Types } from "@tracetest/playwright";\n\nconst { TRACETEST_API_TOKEN = "", TRACETEST_SERVER_URL = "https://app.tracetest.io" } = process.env;\n\nlet tracetest: Types.TracetestPlaywright | undefined = undefined;\n\ntest.describe.configure({ mode: "serial" });\n\n// 2. Load the Tracetest test definition YAML file\nconst definition = `\ntype: Test\nspec:\n  id: UGxheXdyaWdodDogaW1wb3J0cyBhIHBva2Vtb24=\n  name: "Playwright: imports a pokemon"\n  trigger:\n    type: playwright\n  specs:\n    - selector: span[tracetest.span.type="http"]\n      name: "All HTTP Spans: Status  code is 200"\n      assertions:\n      - attr:http.status_code   =   200\n    - selector: span[tracetest.span.type="database"]\n      name: "All Database Spans: Processing time is less than 100ms"\n      assertions:\n      - attr:tracetest.span.duration < 2s\n  outputs:\n    - name: MY_OUTPUT\n      selector: span[tracetest.span.type="general" name="Tracetest trigger"]\n      value: attr:name\n`;\n\n// 3. Add lifecycle hooks\ntest.beforeAll(async () => {\n  tracetest = await Tracetest({ apiToken: TRACETEST_API_TOKEN, serverUrl: TRACETEST_SERVER_URL, serverPath: "" });\n\n  await tracetest.setOptions({\n    "Playwright: imports a pokemon": {\n      definition,\n    },\n  });\n});\n\ntest.beforeEach(async ({ page }, info) => {\n  await page.goto("/");\n  await tracetest?.capture(page, info);\n});\n\n// optional step to break the playwright script in case a Tracetest test fails\ntest.afterAll(async ({}, testInfo) => {\n  testInfo.setTimeout(80000);\n  await tracetest?.summary();\n});\n\ntest("Playwright: creates a pokemon", async ({ page }) => {\n  expect(await page.getByText("Pokeshop")).toBeTruthy();\n\n  await page.click("text=Add");\n\n  await page.getByLabel("Name").fill("Charizard");\n  await page.getByLabel("Type").fill("Flying");\n  await page\n    .getByLabel("Image URL")\n    .fill("https://upload.wikimedia.org/wikipedia/en/1/1f/Pok%C3%A9mon_Charizard_art.png");\n  await page.getByRole("button", { name: "OK", exact: true }).click();\n});\n\ntest("Playwright: imports a pokemon", async ({ page }) => {\n  expect(await page.getByText("Pokeshop")).toBeTruthy();\n\n  await page.click("text=Import");\n\n  await page.getByLabel("ID").fill("143");\n\n  await Promise.all([\n    page.waitForResponse((resp) => resp.url().includes("/pokemon/import") && resp.status() === 200),\n    page.getByRole("button", { name: "OK", exact: true }).click(),\n  ]);\n});\n\ntest("Playwright: deletes a pokemon", async ({ page }) => {\n  await page.locator(\'[data-cy="pokemon-list"]\');\n\n  await page.locator(\'[data-cy="pokemon-card"]\').first().click();\n  await page.locator(\'[data-cy="pokemon-card"] [data-cy="delete-pokemon-button"]\').first().click();\n});\n'})}),"\n",(0,i.jsx)(e.h2,{id:"tracetest-playwright-engine-test",children:"Tracetest Playwright Engine Test"}),"\n",(0,i.jsxs)(e.p,{children:["Running a Tracetest test with the ",(0,i.jsx)(e.a,{href:"/examples-tutorials/recipes/running-tests-with-tracetest-playwright-engine",children:"Playwright Engine"})," requires you to do 3 things:"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Add the target URL of your website."}),"\n",(0,i.jsx)(e.li,{children:"Upload your existing unedited Playwright test script."}),"\n",(0,i.jsx)(e.li,{children:"Select the exported method to execute from the Playwright test script."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Tracetest now natively supports Playwright tests without including third-party libraries or code snippets that are not 100% related to your tests."}),"\n",(0,i.jsx)(e.p,{children:"You upload your existing Playwright test script without adding any additional npm modules."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:'const { expect } = require("@playwright/test");\n\nasync function importPokemon(page) {\n  expect(await page.getByText("Pokeshop")).toBeTruthy();\n  await page.click("text=Import");\n  await page.getByLabel("ID").fill("143");\n  await Promise.all([\n    page.waitForResponse(\n      (resp) => resp.url().includes("/pokemon/import") && resp.status() === 200\n    ),\n    page.getByRole("button", { name: "OK", exact: true }).click(),\n  ]);\n}\n\nmodule.exports = { importPokemon };\n'})}),"\n",(0,i.jsx)(e.p,{children:"Add the target URL and select the method to run."}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1725957754/docs/66b22fa08831a4fafdf2357c_66971c53720e374b82ff4a43_trigger4_ggrzxa.png",alt:""})}),"\n",(0,i.jsx)(e.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsxs)(e.p,{children:["Follow the ",(0,i.jsx)(e.a,{href:"/examples-tutorials/recipes/running-tests-with-tracetest-playwright-engine",children:"Playwright Engine recipe to learn how to run your Playwright tests in Tracetest"}),"."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://tracetest.io/blog/tracetest-playwright-engine-the-future-of-end-to-end-tests-is-trace-based-testing",children:"Read the announcement blog post"})," to learn why we decided to implement the Playwright Engine."]}),"\n",(0,i.jsx)(e.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,i.jsxs)(e.p,{children:["Please visit our ",(0,i.jsx)(e.a,{href:"https://github.com/kubeshop/tracetest/tree/main/examples",children:"examples in GitHub"})," and join our ",(0,i.jsx)(e.a,{href:"https://dub.sh/tracetest-community",children:"Slack Community"})," for more info!"]})]})}function h(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(g,{...t})}):g(t)}},28453:(t,e,n)=>{n.d(e,{R:()=>s,x:()=>o});var i=n(96540);const a={},r=i.createContext(a);function s(t){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function o(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:s(t.components),i.createElement(r.Provider,{value:e},t.children)}}}]);