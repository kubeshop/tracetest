"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[370],{97346:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var t=n(74848),r=n(28453);const i={id:"opentelemetry-collector-configuration-file-reference",title:"OpenTelemetry Collector Configuration File Reference",description:"This is a reference for using the OpenTelemetry Collector to send trace data from your application to any of Tracetest's supported trace data stores.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},s=void 0,c={id:"configuration/opentelemetry-collector-configuration-file-reference",title:"OpenTelemetry Collector Configuration File Reference",description:"This is a reference for using the OpenTelemetry Collector to send trace data from your application to any of Tracetest's supported trace data stores.",source:"@site/docs/configuration/opentelemetry-collector-configuration-file-reference.mdx",sourceDirName:"configuration",slug:"/configuration/opentelemetry-collector-configuration-file-reference",permalink:"/configuration/opentelemetry-collector-configuration-file-reference",draft:!1,unlisted:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/configuration/opentelemetry-collector-configuration-file-reference.mdx",tags:[],version:"current",frontMatter:{id:"opentelemetry-collector-configuration-file-reference",title:"OpenTelemetry Collector Configuration File Reference",description:"This is a reference for using the OpenTelemetry Collector to send trace data from your application to any of Tracetest's supported trace data stores.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},sidebar:"tutorialSidebar",previous:{title:"Sumo Logic",permalink:"/configuration/connecting-to-data-stores/sumologic"},next:{title:"Trace Mode",permalink:"/configuration/trace-mode"}},a={},l=[{value:"Supported Trace Data Stores",id:"supported-trace-data-stores",level:2},{value:"Configure OpenTelemetry Collector to Send Traces to Jaeger",id:"configure-opentelemetry-collector-to-send-traces-to-jaeger",level:2},{value:"Configure OpenTelemetry Collector to Send Traces to OpenSearch",id:"configure-opentelemetry-collector-to-send-traces-to-opensearch",level:2},{value:"Configure OpenTelemetry Collector to Send Traces to Elastic APM",id:"configure-opentelemetry-collector-to-send-traces-to-elastic-apm",level:2},{value:"Configure OpenTelemetry Collector to Send Traces to SignalFx",id:"configure-opentelemetry-collector-to-send-traces-to-signalfx",level:2},{value:"Configure OpenTelemetry Collector to Send Traces to Tempo",id:"configure-opentelemetry-collector-to-send-traces-to-tempo",level:2},{value:"Configure OpenTelemetry Collector to Send Traces to Azure App Insights",id:"configure-opentelemetry-collector-to-send-traces-to-azure-app-insights",level:2},{value:"Configure OpenTelemetry Collector to Send Traces to Sumo Logic",id:"configure-opentelemetry-collector-to-send-traces-to-sumo-logic",level:2}];function d(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.p,{children:"This page contains a reference for using the OpenTelemetry Collector to send trace data from your application to any of Tracetest's supported trace data stores."}),"\n",(0,t.jsx)(o.admonition,{type:"tip",children:(0,t.jsxs)(o.p,{children:["Examples of configuring Tracetest can be found in the ",(0,t.jsxs)(o.a,{href:"https://github.com/kubeshop/tracetest/tree/main/examples",children:[(0,t.jsx)(o.code,{children:"examples"})," folder of the Tracetest GitHub repo"]}),"."]})}),"\n",(0,t.jsx)(o.h2,{id:"supported-trace-data-stores",children:"Supported Trace Data Stores"}),"\n",(0,t.jsx)(o.p,{children:"Tracetest is designed to work with different trace data stores. To enable Tracetest to run end-to-end tests against trace data, you need to configure Tracetest to access trace data."}),"\n",(0,t.jsx)(o.p,{children:"Currently, Tracetest supports the following data stores. Click on the respective data store to view configuration examples:"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/awsxray",children:"AWS X-Ray"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/azure-app-insights",children:"Azure App Insights"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/dash0",children:"Dash0"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/datadog",children:"Datadog"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/dynatrace",children:"Dynatrace"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/elasticapm",children:"Elastic APM"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/tempo",children:"Grafana Tempo"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/honeycomb",children:"Honeycomb"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/jaeger",children:"Jaeger"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/lightstep",children:"Lightstep"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/new-relic",children:"New Relic"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/opensearch",children:"OpenSearch"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/signalfx",children:"SignalFX"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/signoz",children:"SigNoz"})}),"\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"/configuration/connecting-to-data-stores/sumologic",children:"Sumo Logic"})}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:"Continue reading below to learn how to configure the OpenTelemetry Collector to send trace data from your application to any of the trace data stores above."}),"\n",(0,t.jsx)(o.h2,{id:"configure-opentelemetry-collector-to-send-traces-to-jaeger",children:"Configure OpenTelemetry Collector to Send Traces to Jaeger"}),"\n",(0,t.jsxs)(o.p,{children:["In your OpenTelemetry Collector config file, make sure to set the ",(0,t.jsx)(o.code,{children:"exporter"})," to ",(0,t.jsx)(o.code,{children:"jaeger"}),", with the ",(0,t.jsx)(o.code,{children:"endpoint"})," pointing to your Jaeger instance on port ",(0,t.jsx)(o.code,{children:"14250"}),". If you are running Tracetest with Docker, the endpoint might look like this ",(0,t.jsx)(o.code,{children:"http://jaeger:14250"}),"."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and still use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nprocessors:\n  batch:\n    timeout: 100ms\n\nexporters:\n  jaeger:\n    endpoint: jaeger:14250\n    tls:\n      insecure: true\n\nservice:\n  pipelines:\n    # You probably already have a traces pipeline, you don't have to change it.\n    # Just add this one to your configuration. Just make sure to not have two\n    # pipelines with the same name.\n    traces/1:\n      receivers: [otlp] # your receiver\n      processors: [batch] # make sure to add the batch processor\n      exporters: [jaeger] # your exporter pointing to your Jaeger instance\n"})}),"\n",(0,t.jsx)(o.h2,{id:"configure-opentelemetry-collector-to-send-traces-to-opensearch",children:"Configure OpenTelemetry Collector to Send Traces to OpenSearch"}),"\n",(0,t.jsx)(o.p,{children:"You'll configure the OpenTelemetry Collector to receive traces from your system and then send them to OpenSearch via Data Prepper. And, you don't have to change your existing pipelines to do so."}),"\n",(0,t.jsxs)(o.p,{children:["In your OpenTelemetry Collector config file, make sure to set the ",(0,t.jsx)(o.code,{children:"exporter"})," to ",(0,t.jsx)(o.code,{children:"otlp"}),", with the ",(0,t.jsx)(o.code,{children:"endpoint"})," pointing to the Data Prepper on port ",(0,t.jsx)(o.code,{children:"21890"}),". If you are running Tracetest with Docker, the endpoint might look like this ",(0,t.jsx)(o.code,{children:"data-prepper:21890"}),"."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nprocessors:\n  batch:\n    timeout: 100ms\n\nexporters:\n  logging:\n    loglevel: debug\n  otlp/2:\n    endpoint: data-prepper:21890\n    tls:\n      insecure: true\n      insecure_skip_verify: true\n\nservice:\n  pipelines:\n    # You probably already have a traces pipeline, you don't have to change it.\n    # Just add this one to your configuration. Just make sure to not have two\n    # pipelines with the same name.\n    traces/1:\n      receivers: [otlp] # your receiver\n      processors: [batch] # make sure to add the batch processor\n      exporters: [otlp/2] # your exporter pointing to your Data Prepper instance\n"})}),"\n",(0,t.jsx)(o.h2,{id:"configure-opentelemetry-collector-to-send-traces-to-elastic-apm",children:"Configure OpenTelemetry Collector to Send Traces to Elastic APM"}),"\n",(0,t.jsx)(o.p,{children:"You'll configure the OpenTelemetry Collector to receive traces from your system and then send them to Elasticsearch via Elastic APM. And, you don't have to change your existing pipelines to do so."}),"\n",(0,t.jsxs)(o.p,{children:["In your OpenTelemetry Collector config file, make sure to set the ",(0,t.jsx)(o.code,{children:"exporter"})," to ",(0,t.jsx)(o.code,{children:"otlp"}),", with the ",(0,t.jsx)(o.code,{children:"endpoint"})," pointing to the Elastic APM server on port ",(0,t.jsx)(o.code,{children:"8200"}),". If you are running Tracetest with Docker, the endpoint might look like this ",(0,t.jsx)(o.code,{children:"apm-server:8200"}),"."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nprocessors:\n  batch:\n    timeout: 100ms\n\nexporters:\n  otlp/elastic:\n    endpoint: apm-server:8200\n    tls:\n      insecure: true\n      insecure_skip_verify: true\n\nservice:\n  pipelines:\n    # You probably already have a traces pipeline, you don't have to change it.\n    # Just add this one to your configuration. Just make sure to not have two\n    # pipelines with the same name.\n    traces/1:\n      receivers: [otlp] # your receiver\n      processors: [batch] # make sure to add the batch processor\n      exporters: [otlp/elastic] # your exporter pointing to your Elastic APM server instance\n"})}),"\n",(0,t.jsx)(o.h2,{id:"configure-opentelemetry-collector-to-send-traces-to-signalfx",children:"Configure OpenTelemetry Collector to Send Traces to SignalFx"}),"\n",(0,t.jsx)(o.p,{children:"You'll configure the OpenTelemetry Collector to receive traces from your system and then send them to SignalFx. And, you don't have to change your existing pipelines to do so."}),"\n",(0,t.jsxs)(o.p,{children:["In your OpenTelemetry Collector config file, make sure to set the ",(0,t.jsx)(o.code,{children:"exporter"})," to ",(0,t.jsx)(o.code,{children:"sapm"}),", with the ",(0,t.jsx)(o.code,{children:"endpoint"})," pointing to the SignalFx trace ingestion endpoint. The endpoint might look like this ",(0,t.jsx)(o.code,{children:"https://ingest.us1.signalfx.com/v2/trace"}),". Also make sure to add your SignalFx ",(0,t.jsx)(o.code,{children:"access_token"}),"."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nprocessors:\n  batch:\n    timeout: 100ms\n\nexporters:\n  sapm:\n    access_token: <YOUR_TOKEN> # UPDATE THIS\n    access_token_passthrough: true\n    endpoint: https://ingest.us1.signalfx.com/v2/trace # UPDATE THIS IF NEEDED\n    max_connections: 100\n    num_workers: 8\n\nservice:\n  pipelines:\n    # your probably already have a traces pipeline, you don't have to change it.\n    # just add this one to your configuration. Just make sure to not have two\n    # pipelines with the same name\n    traces/1:\n      receivers: [otlp] # your receiver\n      processors: [batch] # make sure to add the batch processor\n      exporters: [sapm] # your exporter pointing to your SignalFx instance\n"})}),"\n",(0,t.jsx)(o.h2,{id:"configure-opentelemetry-collector-to-send-traces-to-tempo",children:"Configure OpenTelemetry Collector to Send Traces to Tempo"}),"\n",(0,t.jsx)(o.p,{children:"You'll configure the OpenTelemetry Collector to receive traces from your system and then send them to Tempo. And, you don't have to change your existing pipelines to do so."}),"\n",(0,t.jsxs)(o.p,{children:["In your OpenTelemetry Collector config file, make sure to set the ",(0,t.jsx)(o.code,{children:"exporter"})," to ",(0,t.jsx)(o.code,{children:"tempo"}),", with the ",(0,t.jsx)(o.code,{children:"endpoint"})," pointing to your Tempo's instance on port ",(0,t.jsx)(o.code,{children:"4317"}),". If you are running Tracetest with Docker, the endpoint might look like this ",(0,t.jsx)(o.code,{children:"http://tempo:4317"}),"."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and still use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nprocessors:\n  batch:\n    timeout: 100ms\n\nexporters:\n  otlp/2:\n    endpoint: tempo:4317\n    tls:\n      insecure: true\n\nservice:\n  pipelines:\n    # your probably already have a traces pipeline, you don't have to change it.\n    # just add this one to your configuration. Just make sure to not have two\n    # pipelines with the same name\n    traces/1:\n      receivers: [otlp] # your receiver\n      processors: [batch] # make sure to have the probabilistic_sampler before your batch processor\n      exporters: [otlp/2] # your exporter pointing to your Tempo instance\n"})}),"\n",(0,t.jsx)(o.h2,{id:"configure-opentelemetry-collector-to-send-traces-to-azure-app-insights",children:"Configure OpenTelemetry Collector to Send Traces to Azure App Insights"}),"\n",(0,t.jsx)(o.p,{children:"You'll configure the OpenTelemetry Collector to receive traces from your system and then send them to Azure App Insights. And, you don't have to change your existing pipelines to do so."}),"\n",(0,t.jsxs)(o.p,{children:["In your OpenTelemetry Collector config file, make sure to set the ",(0,t.jsx)(o.code,{children:"exporter"})," to ",(0,t.jsx)(o.code,{children:"azuremonitor"}),", with the ",(0,t.jsx)(o.code,{children:"endpoint"})," instrumentation key of your Azure App Insights instance."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and still use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nexporters:\n  azuremonitor:\n    instrumentation_key: <your-instrumentation-key>\n\nservice:\n  pipelines:\n    traces/appinsights:\n      receivers: [otlp] # your receiver\n      exporters: [azuremonitor] # your exporter pointing to your Azure App Insights instance\n"})}),"\n",(0,t.jsx)(o.h2,{id:"configure-opentelemetry-collector-to-send-traces-to-sumo-logic",children:"Configure OpenTelemetry Collector to Send Traces to Sumo Logic"}),"\n",(0,t.jsxs)(o.p,{children:["You'll configure the OpenTelemetry Collector to receive traces from your system and then send them to Sumo Logic. You'll use the ",(0,t.jsx)(o.a,{href:"https://github.com/SumoLogic/sumologic-otel-collector/blob/main/docs/installation.md#installation",children:"Sumo Logic OpenTelemetry Collector"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:["In your OpenTelemetry Collector config file, make sure to set the ",(0,t.jsx)(o.code,{children:"exporter"})," to ",(0,t.jsx)(o.code,{children:"sumologic"}),". Then add an ",(0,t.jsx)(o.code,{children:"extensions"})," section with ",(0,t.jsx)(o.code,{children:"sumologic"})," and an ",(0,t.jsx)(o.code,{children:"installation_token"})," using your ",(0,t.jsx)(o.a,{href:"https://help.sumologic.com/docs/manage/security/installation-tokens/",children:"Sumo Logic Installation Token"}),"."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:"# collector.config.yaml\n\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nexporters:\n  sumologic:\n\nextensions:\n  sumologic:\n    # Create an Installation Token in your account at\n    # Administration > Security > Installation Tokens:\n    # https://help.sumologic.com/docs/manage/security/installation-tokens/\n    installation_token: <your-sumologic-installation-token>\n\nservice:\n  extensions: [sumologic]\n  pipelines:\n    traces:\n      receivers: [otlp]\n      exporters: [sumologic]\n"})})]})}function p(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,o,n)=>{n.d(o,{R:()=>s,x:()=>c});var t=n(96540);const r={},i=t.createContext(r);function s(e){const o=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);