"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[5414],{69258:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var i=n(74848),r=n(28453);const o={id:"provisioning",title:"Provisioning a Tracetest Server",description:"Tracetest Core enables the Tracetest Server to be provisioned the first time a new Tracetest Server is installed and launched.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},s=void 0,a={id:"core/configuration/provisioning",title:"Provisioning a Tracetest Server",description:"Tracetest Core enables the Tracetest Server to be provisioned the first time a new Tracetest Server is installed and launched.",source:"@site/docs/core/configuration/provisioning.mdx",sourceDirName:"core/configuration",slug:"/core/configuration/provisioning",permalink:"/core/configuration/provisioning",draft:!1,unlisted:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/core/configuration/provisioning.mdx",tags:[],version:"current",frontMatter:{id:"provisioning",title:"Provisioning a Tracetest Server",description:"Tracetest Core enables the Tracetest Server to be provisioned the first time a new Tracetest Server is installed and launched.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},sidebar:"tutorialSidebar",previous:{title:"Configuring the Tracetest Server",permalink:"/core/configuration/server"},next:{title:"Analytics Settings",permalink:"/core/configuration/analytics"}},c={},l=[];function d(e){const t={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Tracetest allows a server to be provisioned the first time a new Tracetest server is installed and launched. Provisioning sets certain resources in the server to the specified values, allowing you to configure the server. It is convenient in a CI/CD flow where you want to launch a server with a specified configuration."}),"\n",(0,i.jsxs)(t.p,{children:["The server is provisioned by specifying a series of YAML snippets which will configure various resources. Each snippet is separated with the YAML separator, ",(0,i.jsx)(t.code,{children:"---"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"Currently, the following resources can be provisioned:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"DataStore"}),"\n",(0,i.jsx)(t.li,{children:"PollingProfile"}),"\n",(0,i.jsx)(t.li,{children:"Config"}),"\n",(0,i.jsx)(t.li,{children:"Demo"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["For Docker-based installs, the provisioning file is placed in the ",(0,i.jsx)(t.code,{children:"./tracetest/tracetest-provisioning.yaml"})," file by default when you run the ",(0,i.jsx)(t.code,{children:"tracetest server install"})," command and select the ",(0,i.jsx)(t.code,{children:"Using Docker Compose"})," option. The first time you start Tracetest with a ",(0,i.jsx)(t.code,{children:"docker compose -f tracetest/docker-compose.yaml  up -d"})," command, the server will use the contents of this file to provision the server. To provision differently, you would alter the contents of the ",(0,i.jsx)(t.code,{children:"tracetest-provisioning.yaml"})," file before launching Tracetest in Docker."]}),"\n",(0,i.jsxs)(t.p,{children:["This is an example of a ",(0,i.jsx)(t.code,{children:"tracetest-provisioning.yaml"})," file:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"---\ntype: DataStore\nspec:\n  name: otlp\n  type: otlp\n  default: true\n---\ntype: Config\nspec:\n  analyticsEnabled: true\n---\ntype: PollingProfile\nspec:\n  name: Custom Profile\n  strategy: periodic\n  default: true\n  periodic:\n    timeout: 2m\n    retryDelay: 3s\n---\ntype: Demo\nspec:\n  name: pokeshop\n  type: pokeshop\n  enabled: true\n  pokeshop:\n    httpEndpoint: http://demo-api:8081\n    grpcEndpoint: demo-api:8082\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Alternatively, we support setting an environment variable called ",(0,i.jsx)(t.code,{children:"TRACETEST_PROVISIONING"})," to provision the server when it is first started. Base64 encode the provisioning YAML you want to utilize and set the ",(0,i.jsx)(t.code,{children:"TRACETEST_PROVISIONING"})," environment variable with the result. The Tracetest server will then provision based on the Base64 encoded provisioning data in this environment variable the first time it is launched."]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var i=n(96540);const r={},o=i.createContext(r);function s(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);