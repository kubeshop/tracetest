openapi: 3.0.0
components:
  schemas:
    TestConnectionResponse:
      type: object
      properties:
        successful:
          type: boolean
        steps:
          type: array
          items:
            $ref: "#/components/schemas/ConnectionResult"
    ConnectionResult:
      type: object
      properties:
        portCheck:
          $ref: "#/components/schemas/ConnectionTestStep"
        connectivity:
          $ref: "#/components/schemas/ConnectionTestStep"
        authentication:
          $ref: "#/components/schemas/ConnectionTestStep"
        fetchTraces:
          $ref: "#/components/schemas/ConnectionTestStep"
    ConnectionTestStep:
      type: object
      properties:
        passed:
          type: boolean
        status:
          type: string
          enum:
            - passed
            - warning
            - failed
        message:
          type: string
        error:
          type: string
    Configuration:
      type: object
      description: "Represents a coonfiguration into the Resources format."
      properties:
        type:
          type: string
          description: "Represents the type of this resource. It should always be set as 'Config'."
        spec:
          type: object
          description: "Represents the set of configuration common options for Tracetest."
          properties:
            id:
              type: string
              description: "ID of the configuration resource. It should always be set as 'current'."
            name:
              type: string
              description: "Name given for this configuration set. It should always be set as 'Config'."
            analyticsEnabled:
              type: boolean
              description: "Flag telling if a user allow Tracetest to send analytics about its usage."
          required:
            - analyticsEnabled
